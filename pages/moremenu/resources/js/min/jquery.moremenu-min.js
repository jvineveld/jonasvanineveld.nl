!function($){$.fn.moreMenu=function(e){function t(e){return u.verb[e]}function n(e){return $(e).outerWidth(!0)}var i=this,r=null,o=null,m=null,_=0,s=0;this.menu_items=[];var u=$.extend({verb:{more_link:'<a href="#">More..</a>'},more_menu_location:"inside_more_item",class_target:"more_menu",menu_item:"> li",extra_offset:0,check_for_resize:!1},e);return this.throttle=function(e,t,n){t||(t=250);var i,r;return function(){var o=n||this,m=+new Date,_=arguments;i&&m<i+t?(clearTimeout(r),r=setTimeout(function(){i=m,e.apply(o,_)},t)):(i=m,e.apply(o,_))}},this.refresh_menu_items=function(){i.menu_items=[],$(u.menu_item,i).each(function(){$(this).hasClass("more-menu-link")||i.menu_items.push({$el:this,width:n(this)})})},this.move_unfitting_items=function(){var e=$(i).width(),t=e-_-u.extra_offset,n=0;if(s!=e){s=e;for(var m=0;m<i.menu_items.length;m++){var a=i.menu_items[m],c=$(a.$el),l=a.width;n+l>t?c.appendTo(r):c.appendTo(i),n+=l}i.check_more_menu_link_visibility(),o.appendTo(i),i.trigger("on_update",[i])}},this.clear_more_menu=function(){r.html("")},this.create_more_menu=function(){return r=jQuery('<ul class="more-menu" />'),"after_menu"==u.more_menu_location?r.insertAfter(i):"inside_more_item"==u.more_menu_location||r.appendTo(u.more_menu_location),r},this.check_more_menu_link_visibility=function(){r.children().length?o.show():(o.hide(),i.show_hide_more_menu("hide"))},this.show_hide_more_menu=function(e){switch(e){case"show":$(m).addClass("more-menu-active");break;case"hide":$(m).removeClass("more-menu-active");break;case"toggle":$(m).toggleClass("more-menu-active");break}},this.create_more_menu_link=function(){o=jQuery('<li class="more-menu-link"></li>'),o.html(t("more_link")),o.appendTo(i),"inside_more_item"==u.more_menu_location&&r.appendTo(o),_=n(o),o.on("click",function(e){e.preventDefault(),i.show_hide_more_menu("toggle"),i.trigger("on_show_toggle",[i])})},this.set_class_target=function(){m="more_menu"==u.class_target?i:u.class_target,$(m).addClass("mm-initialized")},this.check_for_resizing=function(){u.check_for_resize&&$(document).on("resize",i.throttle(i.move_unfitting_items,100))},i.set_class_target(),i.create_more_menu(),i.create_more_menu_link(),i.refresh_menu_items(),i.move_unfitting_items(),i.check_for_resizing(),i.trigger("on_creation",[i]),i}}(jQuery);