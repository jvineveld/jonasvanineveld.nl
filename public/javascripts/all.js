/**
   /~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   | Combined & uglified javascript file                                        |
   |                                                                            |
   | Includes:                                                                  / 
   | - public/javascripts/modernizr.js
   | - public/javascripts/general.js
   | - public/javascripts/translate.js
   | - public/javascripts/form-handling.js
   | - public/javascripts/minigame.js
   | - public/javascripts/minigame-stats.js
   | - public/javascripts/minigame-notices.js
   |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ 
   | @author Jonas van Ineveld, Personal website - 2018                         |
   \~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~/
  */ 

!function(r,m,f){function p(e,t){return typeof e===t}function h(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function v(){return"function"!=typeof m.createElement?m.createElement(arguments[0]):b?m.createElementNS.call(m,"http://www.w3.org/2000/svg",arguments[0]):m.createElement.apply(m,arguments)}function s(e,t){return function(){return e.apply(t,arguments)}}function i(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function o(e,t,n,a){var i,o,r,s,l,d="modernizr",c=v("div"),u=((l=m.body)||((l=v(b?"svg":"body")).fake=!0),l);if(parseInt(n,10))for(;n--;)(r=v("div")).id=a?a[n]:d+(n+1),c.appendChild(r);return(i=v("style")).type="text/css",i.id="s"+d,(u.fake?u:c).appendChild(i),u.appendChild(c),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(m.createTextNode(e)),c.id=d,u.fake&&(u.style.background="",u.style.overflow="hidden",s=y.style.overflow,y.style.overflow="hidden",y.appendChild(u)),o=t(c,e),u.fake?(u.parentNode.removeChild(u),y.style.overflow=s,y.offsetHeight):c.parentNode.removeChild(c),!!o}function g(e,t){var n=e.length;if("CSS"in r&&"supports"in r.CSS){for(;n--;)if(r.CSS.supports(i(e[n]),t))return!0;return!1}if("CSSSupportsRule"in r){for(var a=[];n--;)a.push("("+i(e[n])+":"+t+")");return o("@supports ("+(a=a.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==function(e,t,n){var a;if("getComputedStyle"in r){a=getComputedStyle.call(r,e,t);var i=r.console;null!==a?n&&(a=a.getPropertyValue(n)):i&&i[i.error?"error":"log"].call(i,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else a=!t&&e.currentStyle&&e.currentStyle[n];return a}(e,null,"position")})}return f}function a(e,t,n,a,i){var o=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+u.join(o+" ")+o).split(" ");return p(t,"string")||p(t,"undefined")?function(e,t,n,a){function i(){r&&(delete x.style,delete x.modElem)}if(a=!p(a,"undefined")&&a,!p(n,"undefined")){var o=g(e,n);if(!p(o,"undefined"))return o}for(var r,s,l,d,c,u=["modernizr","tspan","samp"];!x.style&&u.length;)r=!0,x.modElem=v(u.shift()),x.style=x.modElem.style;for(l=e.length,s=0;s<l;s++)if(d=e[s],c=x.style[d],!!~(""+d).indexOf("-")&&(d=h(d)),x.style[d]!==f){if(a||p(n,"undefined"))return i(),"pfx"!=t||d;try{x.style[d]=n}catch(e){}if(x.style[d]!=c)return i(),"pfx"!=t||d}return i(),!1}(r,t,a,i):function(e,t,n){var a;for(var i in e)if(e[i]in t)return!1===n?e[i]:p(a=t[e[i]],"function")?s(a,n||t):a;return!1}(r=(e+" "+_.join(o+" ")+o).split(" "),t,n)}function e(e,t,n){return a(e,f,f,t,n)}var l=[],d=[],t={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){d.push({name:e,fn:t,options:n})},addAsyncTest:function(e){d.push({name:null,fn:e})}},c=function(){};c.prototype=t,(c=new c).addTest("history",function(){var e=navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")||"file:"===location.protocol)&&(r.history&&"pushState"in r.history)});var y=m.documentElement,b="svg"===y.nodeName.toLowerCase();c.addTest("placeholder","placeholder"in v("input")&&"placeholder"in v("textarea"));var n="Moz O ms Webkit",u=t._config.usePrefixes?n.split(" "):[];t._cssomPrefixes=u;var w=function(e){var t,n=prefixes.length,a=r.CSSRule;if(void 0===a)return f;if(!e)return!1;if((t=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in a)return"@"+e;for(var i=0;i<n;i++){var o=prefixes[i];if(o.toUpperCase()+"_"+t in a)return"@-"+o.toLowerCase()+"-"+e}return!1};t.atRule=w;var _=t._config.usePrefixes?n.toLowerCase().split(" "):[];t._domPrefixes=_;var E={elem:v("modernizr")};c._q.push(function(){delete E.elem});var x={style:E.elem.style};c._q.unshift(function(){delete x.style}),t.testAllProps=a,t.testAllProps=e,c.addTest("cssanimations",e("animationName","a",!0)),c.addTest("flexbox",e("flexBasis","1px",!0)),c.addTest("flexboxlegacy",e("boxDirection","reverse",!0));var A=t.prefixed=function(e,t,n){return 0===e.indexOf("@")?w(e):(-1!=e.indexOf("-")&&(e=h(e)),t?a(e,t,n):a(e,"pfx"))};c.addTest("objectfit",!!A("objectFit"),{aliases:["object-fit"]}),function(){var e,t,n,a,i,o;for(var r in d)if(d.hasOwnProperty(r)){if(e=[],(t=d[r]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=p(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)1===(o=e[i].split(".")).length?c[o[0]]=a:(!c[o[0]]||c[o[0]]instanceof Boolean||(c[o[0]]=new Boolean(c[o[0]])),c[o[0]][o[1]]=a),l.push((a?"":"no-")+o.join("-"))}}(),function(e){var t=y.className,n=c._config.classPrefix||"";if(b&&(t=t.baseVal),c._config.enableJSClass){var a=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(a,"$1"+n+"js$2")}c._config.enableClasses&&(t+=" "+n+e.join(" "+n),b?y.className.baseVal=t:y.className=t)}(l),delete t.addTest,delete t.addAsyncTest;for(var C=0;C<c._q.length;C++)c._q[C]();r.Modernizr=c}(window,document);var out_animation_time=500,$prev_tab=!1;function remove_active_classes(){for(var e=document.querySelectorAll('[id^="tab"]'),t=0;t<e.length;t++)e[t].removeAttribute("data-active")}function show_tab(e,t){var n=t||e,a=document.getElementById("tab-"+n);if(a){document.getElementById("main").setAttribute("data-trans-to",n),$prev_tab&&$prev_tab.setAttribute("data-active","out");for(var i=document.querySelectorAll("aside button"),o=0;o<i.length;o++)i[o].removeAttribute("data-active");n===t&&e.setAttribute("data-active",!0),setTimeout(function(){remove_active_classes(),a.setAttribute("data-active",!0),document.getElementById("main").setAttribute("class",n),document.getElementById("main").setAttribute("data-active-tab",n),$prev_tab=a},out_animation_time)}}setTimeout(function(){show_tab(document.getElementById("tab-intro"),"intro")},400);var animation_lines=["h2"];function create_animation_lines(){animation_lines.forEach(function(e){var t=document.querySelectorAll(e);if(t.length)for(var n=0;n<t.length;n++)$line=t[n],$line.getAttribute("data-charanimate")||($line.innerHTML=$line.innerHTML.replace("&amp;","&").replace(/./g,function(e){return"<span>"+e+"</span>"}),$line.setAttribute("data-charanimate","true"))})}create_animation_lines();var n=["94","151","30","(0)85","+31"].reverse().join(" ");function switch_language(a,e){e.preventDefault(),document.querySelector("#language-switcher [data-active]").removeAttribute("data-active"),e.target.setAttribute("data-active",!0);var i=e.target.href,o=new XMLHttpRequest;o.open("GET",i+"lines",!0),o.onreadystatechange=function(e){if(4===o.readyState&&200===o.status){var t=JSON.parse(o.responseText);if(replace_lines(t.lines),replace_blocks(t.blocks),replace_forms(t.forms),create_animation_lines(),Modernizr.history){var n={lang:a};history.pushState(n,document.getElementsByTagName("title")[0].innerText,i)}else document.location.href=i}},o.send()}document.getElementById("phone").innerHTML='<a href="tel:'+n.replace("(0)","").replace(/\s/g,"")+'">'+n+"</a>",document.getElementById("email").innerHTML=[".nl","own","your","eit","mak","@","as","on","j"].reverse().join(""),window.onpopstate=function(e){console.log(e)};var num_lines_replaced=0;function replace_line(e,t){for(var n=document.querySelectorAll('.md-line[data-name="'+e+'"]'),a=0;a<n.length;a++){var i=n[a],o=i.innerHTML;i.innerHTML='<span class="old">'+o+'</span><span class="new">'+t+"</span>",i.setAttribute("data-active",!0),setTimeout(function(e){i.setAttribute("data-active","animate")}.bind(null,i),100*num_lines_replaced),num_lines_replaced++}}function replace_block(e,t){for(var n=document.querySelectorAll('.md-block[data-name="'+e+'"]'),a=0;a<n.length;a++){n[a].innerHTML=t}}function replace_lines(e){for(var t=num_lines_replaced=0;t<Object.keys(e).length;t++){var n=Object.keys(e)[t];replace_line(n,e[n])}}function replace_blocks(e){for(var t=0;t<e.length;t++){var n=e[t];replace_block(n.name,n.block)}}function replace_forms(e){for(var t=0;t<e.length;t++){var n=e[t];document.forms[t]&&(document.forms[t].innerHTML=n)}}var errors=[],lastError={};function show_form_error(e){var t=document.getElementById("validation-info"),n=document.createElement("div");n.innerHTML=e,console.log(e),lastError.$el&&(lastError.$el.parentElement.removeChild(lastError.$el),lastError.fade_timeout&&clearTimeout(lastError.fade_timeout),lastError.remove_timeout&&clearTimeout(lastError.remove_timeout)),lastError.$el=n,lastError.fade_timeout=setTimeout(function(){t.setAttribute("data-fadeout",!0),lastError.remove_timeout=setTimeout(function(){t.removeChild(n),lastError={}},1e3)},1e3),t.appendChild(n)}function send_form(e){var t=function(e){for(var t="",n=Object.keys(e),a=0;a<n.length;a++)t+=""===t?"":"&",t+=n[a]+"="+e[n[a]];return t}(e),n=new XMLHttpRequest;n.open("POST","/mail",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(e){if(4===n.readyState&&200===n.status){e=JSON.parse(n.responseText);var t=document.getElementById("tab-contact");console.log(e.success,e),e.success?t.setAttribute("data-send",!0):t.setAttribute("data-send",!1)}},n.send(t)}function validateFields(e){for(var t=document.forms.contactform.elements,n=[],a={},i=0;i<t.length;i++){var o=t[i],r="valid"===o.parentElement.dataset.valid;""===o.name||r?a[o.name]=[o.value]:n.push(o.dataset.validationMsg)}return console.log(n,t),n.length?show_form_error(n[0]):(e.setAttribute("disabled",!0),show_form_error(document.getElementById("send-form-btn").dataset.sendingMsg),send_form(a)),!1}function validate_email(e){return e.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)}function validateInput(e,t){var n=e.value,a=e.parentElement.dataset.valid;if(0<n.length&&!a)e.parentElement.setAttribute("data-valid","filled");else if(0===n.length&&!0!==a)return void e.parentElement.removeAttribute("data-valid");switch(t){case"name":return void(4<=n.length&&"valid"!==a?e.parentElement.setAttribute("data-valid","valid"):0<n.length&&n.length<4&&"valid"===a&&e.parentElement.setAttribute("data-valid","filled"));case"contact":var i=document.getElementById("email_phone_type"),o="Email";return!(!isNaN(n[0])||"+"===n[0])||!!n.includes("@")?(e.dataset.validationMsg=e.dataset.emailValidationMsg,validate_email(n)&&"valid"!==a?e.parentElement.setAttribute("data-valid","valid"):validate_email(n)||"valid"!==a||e.parentElement.setAttribute("data-valid","filled")):(o="Telefoon",e.dataset.validationMsg=e.dataset.phoneValidationMsg,10<=n.length&&"valid"!==a?e.parentElement.setAttribute("data-valid","valid"):n.length<10&&"valid"===a&&e.parentElement.setAttribute("data-valid","filled")),void(i.innerHTML=o);case"description":return void(60<n.length&&"valid"!==a&&e.parentElement.setAttribute("data-valid","valid"))}}function scrollToInput(e){document.body.clientWidth<800&&setTimeout(function(){document.getElementById("tab-contact").scrollTop=e.getBoundingClientRect().top},250)}var minigame=function(){var u,m,t,a,f,n,i,e,o,r,s=document.getElementsByTagName("body")[0],l=document.getElementById("avatar"),d=new Image,c=1,p=200,h=40,v=[],g=90,y=.2,b=4,w=2,_=.97,E=!0,x=1,A=0,C=0,T="[esc] om te stoppen | [spatie] voor pauze",k={up:!1,down:!1,left:!1,right:!1},S=this.notices,M=(this.stats,{objects:{solid:[],cloud:[],point:[]},speed:.7,count:{solid:0,cloud:4,point:0},types:{point:[{img:"/images/targets/star-134-120.png",width:134,height:120}],solid:[{img:"/images/targets/aircraft-280-122.png",width:280,height:122},{img:"/images/targets/shark-500-159.png",width:500,height:159},{img:"/images/targets/chair-200-285.png",width:200,height:285}],cloud:[{img:"/images/clouds/cloud-300-146.png",width:300,height:146},{img:"/images/clouds/cloud-300-176.png",width:300,height:176},{img:"/images/clouds/cloud-300-182.png",width:300,height:182},{img:"/images/clouds/cloud-300-184.png",width:300,height:184},{img:"/images/clouds/cloud-300-189.png",width:300,height:189},{img:"/images/clouds/cloud-300-240.png",width:300,height:240}]}}),$={10:{count:{solid:1,cloud:4,point:2}},20:{speed:2,count:{solid:2,cloud:6,point:2}}},I=["h1","#tab-intro p",".social a","aside nav button"],B=[];function j(){v.forEach(function(e){var t,n;t=e.$el,n=e.zindex,t.width=a=document.body.clientWidth,t.height=f=document.body.clientHeight,t.style.left="0px",t.style.top="0px",t.style.zIndex=n,t.style.position="absolute"}),e=l.getBoundingClientRect()}function L(e,t){var n={within_box_x_right:e.x<t.x+t.width,within_box_x_left:e.x+e.width>t.x,within_box_y_bottom:e.y<t.y+t.height,within_box_y_top:e.height+e.y>t.y};return n.within_box_x_right&&n.within_box_x_left&&n.within_box_y_bottom&&n.within_box_y_top}function q(e){var t="keydown"===(e=e||window.event).type;switch(e.keyCode){case 38:case 87:k.up=t;break;case 40:case 83:k.down=t;break;case 37:case 65:k.left=t;break;case 39:case 68:k.right=t;break;case 32:t&&N();break;case 27:t&&(E=!1,v.forEach(function(e){e.$el.parentNode.removeChild(e.$el)}),document.removeEventListener("keydown",q),document.removeEventListener("keyup",q),document.removeEventListener("click",N),s.removeAttribute("game-active"),s.removeAttribute("stage"),s.removeChild(r),["collision-object","touched"].forEach(function(e){for(var t=document.querySelectorAll("["+e+"]"),n=0;n<t.length;n++)t[n].removeAttribute(e),t[n].style.transform=null}),s=d=l=M=n=i=null,delete window.mg.game)}t&&!E&&[38,87].includes(e.keyCode)&&N()}function z(){o.clearRect(0,0,a,f),o.translate(Math.round(u+p/2),Math.round(m+h/2)),o.rotate((g-90)*Math.PI/180),o.drawImage(d,0-p/2,0-h/2,p,h),o.setTransform(1,0,0,1,0,0)}function H(){if(E){var e=function(){var c=[];B.forEach(function(e,t){var n=e.bounds;if("rect"===e.type){if(L({x:u,y:m,width:p,height:h},n)){var a=f-n.y-100;S.show_notice("destroyer"),c.push({type:e.type}),e.$el.setAttribute("touched",!0),e.$el.style.transform="translate(0, "+a+"px)",B.splice(t,1)}}else if("avatasdar"===e.type){var i=e.bounds.width/2,o=e.bounds.width/2+e.bounds.x,r=e.bounds.height/2+e.bounds.y,s=p/2,l=o-(p/2+u),d=r-(h/2+m);Math.sqrt(l*l+d*d)<i+s&&c.push({type:"solid"})}});for(var e=Object.keys(M.objects),t=0;t<e.length;t++){var n=e[t];M.objects[n].forEach(function(e,t){if(L({x:u,y:m,width:p,height:h},e))switch(c.push({type:n}),n){case"solid":M.speed+10,S.show_notice("solid_astroid");break;case"point":M.objects[n].splice(t,1),S.show_notice("point")}})}return c}();for(direction in function(){if(4===x)return cur_time=Date.now(),sec_in=Math.floor((cur_time-C)/1e3),$[sec_in]&&!$[sec_in].activated&&($[sec_in].activated=!0,M=Object.assign(M,$[sec_in]));1===B.length&&2!==x&&(x=2,S.play_final_notices())}(),c=t,A*=_,k)if(k[direction])switch(direction){case"left":g-=b;break;case"right":g+=b;break;case"up":e.length?A+=y:A-=y,k.left&&(3,A+=y),k.right&&(3,A+=y),c=g*Math.PI/180;break;case"down":e.length?A-=y:A+=y}c=g*Math.PI/180,m+=A*Math.sin(c)+w,u+=A*Math.cos(c),m,t=c,z(),window.requestAnimationFrame(H),a<u?u=0:u<0&&(u=a),f<m?m=0:m<0&&(m=f)}}function N(){(E=!E)&&window.requestAnimationFrame(H)}return s.setAttribute("game-active",!0),(r=document.createElement("span")).id="info-line",r.innerHTML=T,s.appendChild(r),C=Date.now(),n=document.createElement("canvas"),s.appendChild(n),o=n.getContext("2d"),i=document.createElement("canvas"),s.appendChild(i),i.getContext("2d"),v.push({$el:n,zindex:60},{$el:i,zindex:62}),j(),d.onload=function(){u=e.x-10,m=e.y-74,z()},d.src="/images/quadcopter.svg",I.forEach(function(e){for(var t=document.querySelectorAll(e),n=0;n<t.length;n++){var a=t[n];a.setAttribute("collision-object",!0),B.push({$el:a,bounds:a.getBoundingClientRect(),type:"rect"})}}),B.push({$el:l,bounds:l.getBoundingClientRect(),type:"avatar"}),document.activeElement.blur(),document.addEventListener("keydown",q),document.addEventListener("keyup",q),document.addEventListener("click",N),this};function ig(){window.mg.game||(window.mg.game=minigame.apply({stats:new statKeeper,notices:new notices}))}window.mg={};var hc=0,ht=3;function eg(){hc===ht?(ig(),hc=0):hc++,document.getElementById("avatar").setAttribute("data-enabler",hc)}!function(){for(var o=0,e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),a=Math.max(0,16-(n-o)),i=window.setTimeout(function(){e(n+a)},a);return o=n+a,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var statKeeper=function(){var e=0,t=10;this.scored=function(){return e++},this.died=function(){return t--}},notices=function(){var t=document.getElementsByTagName("body")[0],i=document.getElementById("mingame-sounds"),n=!1,a=0,o={destroyer:["Sloop het maar..","Laat je nog iets over voor de rest?","Alles moet kapot!","Dat was m'n favoriet!"],final:["Tja, en dat was het alweer..","Heb nou ook weer niet","zoveel vrije tijd.. Haha!"]},r={avatar:document.getElementById("sound_error"),destroyer:document.getElementById("sound_avatar_destroy"),avatar_success:document.getElementById("sound_avatar_destroy"),solid_astroid:document.getElementById("sound_fail"),point:document.getElementById("sound_coin")};function s(e){var t,n=r[e].cloneNode(!0),a=(t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)})()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t();n.id=a,i.appendChild(n),n.volume=.3,n.play(),setTimeout(function(e){i.removeChild(document.getElementById(e)),console.log("sound removed")}.bind(null,a),500)}function l(e){$exists=document.getElementById("notice"),$exists&&($exists.setAttribute("getting-removed",!0),$exists.parentNode.removeChild($exists)),$notice=document.createElement("div"),$notice.id="notice",$notice.innerHTML=e,t.appendChild($notice)}this.play_final_notices=function(){var e=o.final.length,t=0,n=setInterval(function(){t<e&&(l(o.final[t]),t++),t===e&&clearInterval(n)},1500)},this.show_notice=function(e){var t;(n!==e||1500<Date.now()-a)&&(console.log("show msg",e),l(o[t=e][Math.floor(Math.random()*o[t].length)]),n=e,a=Date.now()),s(e)}};